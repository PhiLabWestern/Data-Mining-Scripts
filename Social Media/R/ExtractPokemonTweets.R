

options(echo=TRUE)
args <- commandArgs

library(twitteR)
library(streamR)
library(jsonlite)

pattern <- "\\<Abra\\>|\\<Aerodactyl\\>|\\<Alakazam\\>|\\<Arbok\\>|\\<Arcanine\\>|\\<Articuno\\>|\\<Beedrill\\>|\\<Bellsprout\\>|\\<Blastoise\\>|\\<Bulbasaur\\>|\\<Butterfree\\>|\\<Caterpie\\>|\\<Chansey\\>|\\<Charizard\\>|\\<Charmander\\>|\\<Charmeleon\\>|\\<Clefable\\>|\\<Clefairy\\>|\\<Cloyster\\>|\\<Cubone\\>|\\<Dewgong\\>|\\<Diglett\\>|\\<Ditto\\>|\\<Dodrio\\>|\\<Doduo\\>|\\<Dragonair\\>|\\<Dragonite\\>|\\<Dratini\\>|\\<Drowzee\\>|\\<Dugtrio\\>|\\<Eevee\\>|\\<Ekans\\>|\\<Electabuzz\\>|\\<Electrode\\>|\\<Exeggcute\\>|\\<Exeggutor\\>|\\<Farfetch'd\\>|\\<Fearow\\>|\\<Flareon\\>|\\<Gastly\\>|\\<Gengar\\>|\\<Geodude\\>|\\<Gloom\\>|\\<Golbat\\>|\\<Goldeen\\>|\\<Golduck\\>|\\<Golem\\>|\\<Graveler\\>|\\<Grimer\\>|\\<Growlithe\\>|\\<Gyarados\\>|\\<Haunter\\>|\\<Hitmonchan\\>|\\<Hitmonlee\\>|\\<Horsea\\>|\\<Hypno\\>|\\<Ivysaur\\>|\\<Jigglypuff\\>|\\<Jolteon\\>|\\<Jynx\\>|\\<Kabuto\\>|\\<Kabutops\\>|\\<Kadabra\\>|\\<Kakuna\\>|\\<Kangaskhan\\>|\\<Kingler\\>|\\<Koffing\\>|\\<Krabby\\>|\\<Lapras\\>|\\<Lickitung\\>|\\<Machamp\\>|\\<Machoke\\>|\\<Machop\\>|\\<Magikarp\\>|\\<Magmar\\>|\\<Magnemite\\>|\\<Magneton\\>|\\<Mankey\\>|\\<Marowak\\>|\\<Meowth\\>|\\<Metapod\\>|\\<Mew\\>|\\<Mewtwo\\>|\\<Moltres\\>|\\<Mr. Mime\\>|\\<Muk\\>|\\<Nidoking\\>|\\<Nidoqueen\\>|\\<Nidoran???\\>|\\<Nidoran???\\>|\\<Nidorina\\>|\\<Nidorino\\>|\\<Ninetales\\>|\\<Oddish\\>|\\<Omanyte\\>|\\<Omastar\\>|\\<Onix\\>|\\<Paras\\>|\\<Parasect\\>|\\<Persian\\>|\\<Pidgeot\\>|\\<Pidgeotto\\>|\\<Pidgey\\>|\\<Pikachu\\>|\\<Pinsir\\>|\\<Poliwag\\>|\\<Poliwhirl\\>|\\<Poliwrath\\>|\\<Ponyta\\>|\\<Porygon\\>|\\<Primeape\\>|\\<Psyduck\\>|\\<Raichu\\>|\\<Rapidash\\>|\\<Raticate\\>|\\<Rattata\\>|\\<Rhydon\\>|\\<Rhyhorn\\>|\\<Sandshrew\\>|\\<Sandslash\\>|\\<Scyther\\>|\\<Seadra\\>|\\<Seaking\\>|\\<Seel\\>|\\<Shellder\\>|\\<Slowbro\\>|\\<Slowpoke\\>|\\<Snorlax\\>|\\<Spearow\\>|\\<Squirtle\\>|\\<Starmie\\>|\\<Staryu\\>|\\<Tangela\\>|\\<Tauros\\>|\\<Tentacool\\>|\\<Tentacruel\\>|\\<Vaporeon\\>|\\<Venomoth\\>|\\<Venonat\\>|\\<Venusaur\\>|\\<Victreebel\\>|\\<Vileplume\\>|\\<Voltorb\\>|\\<Vulpix\\>|\\<Wartortle\\>|\\<Weedle\\>|\\<Weepinbell\\>|\\<Weezing\\>|\\<Wigglytuff\\>|\\<Zapdos\\>|\\<Zubat\\>|Pokemon|pokemon|\\<abra\\>|\\<aerodactyl\\>|\\<alakazam\\>|\\<arbok\\>|\\<arcanine\\>|\\<articuno\\>|\\<beedrill\\>|\\<bellsprout\\>|\\<blastoise\\>|\\<bulbasaur\\>|\\<butterfree\\>|\\<caterpie\\>|\\<chansey\\>|\\<charizard\\>|\\<charmander\\>|\\<charmeleon\\>|\\<clefable\\>|\\<clefairy\\>|\\<cloyster\\>|\\<cubone\\>|\\<dewgong\\>|\\<diglett\\>|\\<ditto\\>|\\<dodrio\\>|\\<doduo\\>|\\<dragonair\\>|\\<dragonite\\>|\\<dratini\\>|\\<drowzee\\>|\\<dugtrio\\>|\\<eevee\\>|\\<ekans\\>|\\<electabuzz\\>|\\<electrode\\>|\\<exeggcute\\>|\\<exeggutor\\>|\\<farfetch'd\\>|\\<fearow\\>|\\<flareon\\>|\\<gastly\\>|\\<gengar\\>|\\<geodude\\>|\\<gloom\\>|\\<golbat\\>|\\<goldeen\\>|\\<golduck\\>|\\<golem\\>|\\<graveler\\>|\\<grimer\\>|\\<growlithe\\>|\\<gyarados\\>|\\<haunter\\>|\\<hitmonchan\\>|\\<hitmonlee\\>|\\<horsea\\>|\\<hypno\\>|\\<ivysaur\\>|\\<jigglypuff\\>|\\<jolteon\\>|\\<jynx\\>|\\<kabuto\\>|\\<kabutops\\>|\\<kadabra\\>|\\<kakuna\\>|\\<kangaskhan\\>|\\<kingler\\>|\\<koffing\\>|\\<krabby\\>|\\<lapras\\>|\\<lickitung\\>|\\<machamp\\>|\\<machoke\\>|\\<machop\\>|\\<magikarp\\>|\\<magmar\\>|\\<magnemite\\>|\\<magneton\\>|\\<mankey\\>|\\<marowak\\>|\\<meowth\\>|\\<metapod\\>|\\<mew\\>|\\<mewtwo\\>|\\<moltres\\>|\\<mr. mime\\>|\\<muk\\>|\\<nidoking\\>|\\<nidoqueen\\>|\\<nidoran???\\>|\\<nidoran???\\>|\\<nidorina\\>|\\<nidorino\\>|\\<ninetales\\>|\\<oddish\\>|\\<omanyte\\>|\\<omastar\\>|\\<onix\\>|\\<paras\\>|\\<parasect\\>|\\<persian\\>|\\<pidgeot\\>|\\<pidgeotto\\>|\\<pidgey\\>|\\<pikachu\\>|\\<pinsir\\>|\\<poliwag\\>|\\<poliwhirl\\>|\\<poliwrath\\>|\\<ponyta\\>|\\<porygon\\>|\\<primeape\\>|\\<psyduck\\>|\\<raichu\\>|\\<rapidash\\>|\\<raticate\\>|\\<rattata\\>|\\<rhydon\\>|\\<rhyhorn\\>|\\<sandshrew\\>|\\<sandslash\\>|\\<scyther\\>|\\<seadra\\>|\\<seaking\\>|\\<seel\\>|\\<shellder\\>|\\<slowbro\\>|\\<slowpoke\\>|\\<snorlax\\>|\\<spearow\\>|\\<squirtle\\>|\\<starmie\\>|\\<staryu\\>|\\<tangela\\>|\\<tauros\\>|\\<tentacool\\>|\\<tentacruel\\>|\\<vaporeon\\>|\\<venomoth\\>|\\<venonat\\>|\\<venusaur\\>|\\<victreebel\\>|\\<vileplume\\>|\\<voltorb\\>|\\<vulpix\\>|\\<wartortle\\>|\\<weedle\\>|\\<weepinbell\\>|\\<weezing\\>|\\<wigglytuff\\>|\\<zapdos\\>|\\<zubat\\>|"

invisible(tweetsFrame <- parseTweets(tweetsFilename));
#Filter out the ones from the US that are getting caught in border cases.
invisible(tweetsFrame[!tweetsFrame$country == "United States",]);

#Now filter out based on the pattern provided.
invisible(indexes <- grep(pattern,tweetsFrame$text));
invisible(filteredTweetsFrame <- tweetsFrame[indexes,])
